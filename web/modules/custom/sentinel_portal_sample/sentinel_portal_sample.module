<?php

/**
 * @file
 * Sentinel Portal Sample module hooks.
 */

/**
 * Implements hook_mail().
 */
function sentinel_portal_sample_mail($key, &$message, $params) {
  switch ($key) {
    case 'anonymous_submission':
      $message['subject'] = t('Complete Your Submission â€“ Sentinel Performance Solutions');

      $code = $params['verification_code'] ?? '';
      $details_url = $params['details_url'] ?? '';

      $logo_url = \Drupal::service('file_url_generator')
        ->generateAbsoluteString('public://image.png');

      $message['body'] = [
        'Dear User,',
        'Thank you for your submission.',
        'To add additional details to your submission, please use the code below:',
        'Verification Code: ' . $code,
        'Click the link below to continue:',
        $details_url,
        'Sentinel Performance Solutions Ltd',
        'United Kingdom',
        'sentinelprotects.com',
        'This is a system-generated message. Please do not reply.',
      ];
      break;
  }

  if (empty($message['body'])) {
    $message['body'] = [
      t('Thank you for your submission.'),
    ];
  }
}
